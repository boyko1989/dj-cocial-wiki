# Переменные окружения

<!--TODO: расписать способы работы с конфиденциальными данными в открытом репозитории -->
Для того, чтобы в Git репозиторий не попала конфиденциальная информация можно пойти несколькими путями. Их я распишу, однако сразу скажу, что наиболее удобным является использование переменных окружения.

При работе с проектами на Python можно использовать библиотеку [python-dotenv](https://pypi.org/project/python-dotenv/). Устанавливается она следующей командой:

```shell
pip install python-dotenv
```

В нашем случае (проект на Django) в файле `settings.py` мы импортируем метод `load_dotenv()`, который будет загружать все переменные из файла, который мы ему укажем в наше окружение. Это позволит нам загружать их значения, например при помощи метода `getenv()` из модуля `os`.

Значит, прежде, чем прописывать путь до файла с переменными окружения, нужно его создать:

```shell
pwd
(output)$ <project_root>

touch .env
```

Для примера в него можно перенести значение константы `SECRET_KEY` из файла `settings.py`:

```text
SECRET_KEY=django-insecure-<very_long_string>
```

Здесь нужно обратить внимание, что применяется синтаксис интерпретатора терминала, то есть НИКАКИХ ПРОБЕЛОВ между операндами и знаком присваивания.

Теперь в том же `settings.py` пишем:

```python

from dotenv import load_dotenv
# чтобы была возможность использовать класс Path
from pathlib import Path


# вычисляем местонахождения .env
env_path = Path('.')/'.env'
# либо, если не хочется использовать лишние импорты, то можно прописывать так:
#
# env_path = './.env'

# передаём путь до файла методу через именованый параметр dotenv_path
load_dotenv(dotenv_path=env_path)

```

Метод `load_dotenv` может принять путь к файлу `.env`. В таком случае он просто распарсит указанный файл, загрузив пары ключ/значение в переменные окружения. Однако, он может принять через параметр `stream` поток текста.

Также мы можем указать опцию `verbose` и `override`. Обе по умолчанию установлены в логическую ложь. Первая запрещает выводить предупреждения об отсутствии файла `.env` (ну или как мы там его назовём), а вторая - запрещает перезаписывать системные переменные окружения.

Используем в нашем файле:

```python

SECRET_KEY = os.getenv('SECRET_KEY')

```

Что касается работы с Git, то в файл `.gitignore` добавляем файл `.env` и можно индекировать и коммитить проект.
